(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d958dbc"],{1838:function(e,t,n){},"501f":function(e,t,n){},"55f1":function(e,t,n){"use strict";var a=n("1838"),s=n.n(a);s.a},d6db:function(e,t,n){"use strict";var a=n("501f"),s=n.n(a);s.a},e468:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[e._m(0),n("div",{staticClass:"container"},[n("masonry",{attrs:{cols:{default:3,991:2,767:1},gutter:{default:"30px",767:"15px"}}},e._l(e.chats,(function(t){return n("div",{key:t.id,staticClass:"card mb-4 box-shadow"},[n("div",{staticClass:"card-header"},[n("h2",{staticClass:"my-0 font-weight-normal"},[e._v(" "+e._s(t.data().chatRoomID[5])+" ")])]),n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title"},[e._v("Most Recent")]),n("p",[e._v(e._s(e.getValue(t.data().messages.pop())))]),n("div",{staticClass:"row justify-content-center align-items-center"},[n("div",{staticClass:"col-auto"},[n("router-link",{attrs:{to:{name:"chat",params:{uname:e.getChatLink(t.data().chatRoomID[2],t.data().chatRoomID[3])}}}},[n("button",{staticClass:"btn btn-lg btn-block btn-primary"},[e._v("Chat")])])],1)])])])})),0),n("comments")],1)])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"jumbotron text-center"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"jumbotron-heading"},[e._v("Chats")])])])}],r=(n("96cf"),n("1da1")),c=n("032d"),o=n("fd47"),i={name:"allusers",components:{comments:o["a"]},computed:{user:function(){return this.$store.state.user}},methods:{getValue:function(e){if(void 0==e)return"No messages here";var t=e.sender+": "+e.value;return t},getChatLink:function(e,t){return this.user.uname==e?t:e}},data:function(){return{chats:null}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["c"].collection("chats").where("chatRoomID","array-contains",e.user.uname).get();case 2:n=t.sent,e.chats=n.docs;case 4:case"end":return t.stop()}}),t)})))()}},u=i,l=(n("55f1"),n("2877")),m=Object(l["a"])(u,a,s,!1,null,null,null);t["default"]=m.exports},fd47:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("div",{staticClass:"jumbotron"},[n("h3",[e._v("Comments")]),n("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"my-3 p-3 bg-white rounded shadow-sm scroll"},[n("div",{staticClass:"media text pt-3"},[n("div",e._l(e.comments,(function(t){return n("div",{key:t.id,staticClass:"media-body pb-3 mb-0 lh-125"},[n("span",[e._v(e._s(t.value))]),n("span",{staticClass:"text-muted"},[e._v(e._s(t.sender)+", "+e._s(e.makeTimeReadable(t.timestamp)))]),e.user.uname==t.sender?n("a",{staticClass:"btn text-right text-muted",on:{click:function(n){return n.preventDefault(),e.delComment(t.value,t.sender,t.timestamp)}}},[e._v("Delete")]):e._e()])})),0)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("form",[n("div",{staticClass:"input-group add-on"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"form-control mr-1",attrs:{type:"text",id:"newMessage",placeholder:"Add a comment..."},domProps:{value:e.newMessage},on:{input:[function(t){t.target.composing||(e.newMessage=t.target.value)},function(t){return e.checkInput()}]}}),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.disableSend},on:{click:function(t){return t.preventDefault(),e.addComment()}}},[e._v(" Send ")])])])])])])])])},s=[],r=(n("96cf"),n("1da1")),c=n("c1df"),o=n.n(c),i=n("032d"),u={computed:{user:function(){return this.$store.state.user}},data:function(){return{route:this.$route.path,comments:[],comBoxID:null,newMessage:null,disableSend:null}},methods:{addComment:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["d"].httpsCallable("addComment")({comBoxID:e.comBoxID,comment:{value:e.newMessage,sender:e.user.uname,timestamp:Date.now()}});case 2:e.newMessage=null;case 3:case"end":return t.stop()}}),t)})))()},delComment:function(e,t,n){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,i["d"].httpsCallable("deleteComment")({comBoxID:a.comBoxID,comment:{value:e,sender:t,timestamp:n}});case 2:case"end":return s.stop()}}),s)})))()},checkInput:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null==e.newMessage||""==e.newMessage?e.disableSend=!0:e.disableSend=!1;case 1:case"end":return t.stop()}}),t)})))()},makeTimeReadable:function(e){return o()(e).format("lll")}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["c"].collection("comments").where("commentBoxID","array-contains",e.route).get();case 2:if(n=t.sent,!n.empty){t.next=9;break}return t.next=6,i["d"].httpsCallable("createCommentBox")({route:e.route});case 6:location.reload(),t.next=10;break;case 9:e.comBoxID=n.docs[0].id;case 10:a=i["c"].collection("comments").doc(e.comBoxID),a.onSnapshot((function(t){e.comments=t.data().comments})),e.disableSend=!0;case 13:case"end":return t.stop()}}),t)})))()}},l=u,m=(n("d6db"),n("2877")),d=Object(m["a"])(l,a,s,!1,null,"682c76ed",null);t["a"]=d.exports}}]);
//# sourceMappingURL=chunk-1d958dbc.90452d28.js.map