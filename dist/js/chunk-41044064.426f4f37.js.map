{"version":3,"sources":["webpack:///./src/components/projects/projectchat.vue?23af","webpack:///./src/components/projects/projectchat.vue?ce12","webpack:///src/components/projects/projectchat.vue","webpack:///./src/components/projects/projectchat.vue?25b7","webpack:///./src/components/projects/projectchat.vue?db6c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","_l","chat","key","id","_s","value","sender","makeTimeReadable","timestamp","user","uname","on","$event","preventDefault","delComment","_e","expression","attrs","domProps","target","composing","newMessage","checkInput","disableSend","addComment","_m","staticRenderFns","computed","$store","state","data","route","$route","path","chats","chatBoxID","members","params","methods","component"],"mappings":"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","file":"js/chunk-41044064.426f4f37.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./projectchat.vue?vue&type=style&index=0&id=4827d002&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./projectchat.vue?vue&type=style&index=0&id=4827d002&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[_c('section',{staticClass:\"jumbotron\"},[_c('div',{staticClass:\"container\"},[_c('h3',[_vm._v(\"Project Chat\")]),_c('div',{directives:[{name:\"chat-scroll\",rawName:\"v-chat-scroll\"}],staticClass:\"my-3 p-3 bg-white rounded shadow-sm scroll\"},[_c('div',{staticClass:\"media text pt-3\"},[_c('div',_vm._l((_vm.chats),function(chat){return _c('div',{key:chat.id,staticClass:\"media-body pb-3 mb-0 lh-125\"},[_c('span',[_vm._v(_vm._s(chat.value))]),_c('span',{staticClass:\"text-muted\"},[_vm._v(_vm._s(chat.sender)+\", \"+_vm._s(_vm.makeTimeReadable(chat.timestamp)))]),(_vm.user.uname == chat.sender)?_c('a',{staticClass:\"btn text-right text-muted\",on:{\"click\":function($event){$event.preventDefault();return _vm.delComment(chat.timestamp)}}},[_vm._v(\"Delete\")]):_vm._e()])}),0)])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('form',[_c('div',{staticClass:\"input-group add-on\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMessage),expression:\"newMessage\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"newMessage\",\"placeholder\":\"Send a chat...\"},domProps:{\"value\":(_vm.newMessage)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.newMessage=$event.target.value},function($event){return _vm.checkInput()}]}}),_c('div',{staticClass:\"input-group-btn\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.disableSend},on:{\"click\":function($event){$event.preventDefault();return _vm.addComment()}}},[_vm._v(\" Send \")])])])])])])])]),_c('hr',{staticClass:\"featurette-divider\"}),_c('footer',{staticClass:\"container\"},[_vm._m(0),_c('p',[_vm._v(\" © 2018 Humanistic Co-Design Initiative · \"),_c('a',[_c('router-link',{attrs:{\"to\":{ name: 'privacy' }}},[_vm._v(\"Privacy\")])],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"float-right\"},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Back to top\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <main>\n    <section class=\"jumbotron\">\n      <div class=\"container\">\n        <h3>Project Chat</h3>\n        <div class=\"my-3 p-3 bg-white rounded shadow-sm scroll\" v-chat-scroll>\n          <div class=\"media text pt-3\">\n            <div>\n              <div\n                class=\"media-body pb-3 mb-0 lh-125\"\n                v-for=\"chat in chats\"\n                :key=\"chat.id\"\n              >\n                <span>{{ chat.value }}</span>\n                <span class=\"text-muted\"\n                  >{{ chat.sender }},\n                  {{ makeTimeReadable(chat.timestamp) }}</span\n                >\n                <a\n                  v-if=\"user.uname == chat.sender\"\n                  class=\"btn text-right text-muted\"\n                  @click.prevent=\"delComment(chat.timestamp)\"\n                  >Delete</a\n                >\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <form>\n              <div class=\"input-group add-on\">\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"newMessage\"\n                  placeholder=\"Send a chat...\"\n                  v-model=\"newMessage\"\n                  @input=\"checkInput()\"\n                />\n                <div class=\"input-group-btn\">\n                  <button\n                    :disabled=\"disableSend\"\n                    class=\"btn btn-primary\"\n                    @click.prevent=\"addComment()\"\n                  >\n                    Send\n                  </button>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <hr class=\"featurette-divider\" />\n\n    <footer class=\"container\">\n      <p class=\"float-right\"><a href=\"#\">Back to top</a></p>\n      <p>\n        © 2018 Humanistic Co-Design Initiative ·\n        <a>\n          <router-link :to=\"{ name: 'privacy' }\">Privacy</router-link>\n        </a>\n      </p>\n    </footer>\n  </main>\n</template>\n<script>\nimport moment from \"moment\";\nimport { db } from \"@/firebase/init.js\";\nexport default {\n  computed: {\n    user() {\n      return this.$store.state.user;\n    }\n  },\n  data() {\n    return {\n      route: this.$route.path,\n      chats: [],\n      chatBoxID: null,\n      newMessage: null,\n      disableSend: null,\n      members: null,\n      name: this.$route.params.name\n    };\n  },\n  methods: {\n    async addComment() {\n      let dataref = db.collection(\"projectchats\").doc(this.chatBoxID);\n      let data = await dataref.get();\n      this.chats = data.data().chats;\n      this.chats.push({\n        value: this.newMessage,\n        sender: this.user.uname,\n        timestamp: Date.now()\n      });\n      await dataref.update({\n        chats: this.chats\n      });\n      this.newMessage = null;\n    },\n    async delComment(timestamp) {\n      let dataref = db.collection(\"projectchats\").doc(this.chatBoxID);\n      let data = await dataref.get();\n      this.chats = data\n        .data()\n        .chats.filter(comment => comment.timestamp != timestamp);\n      await dataref.update({\n        chats: this.chats\n      });\n    },\n    async checkInput() {\n      if (this.newMessage == null || this.newMessage == \"\") {\n        this.disableSend = true;\n      } else {\n        this.disableSend = false;\n      }\n    },\n    makeTimeReadable(timestamp) {\n      return moment(timestamp).format(\"lll\");\n    }\n  },\n  async created() {\n    let findChat = await db\n      .collection(\"projectchats\")\n      .where(\"chatBoxID\", \"array-contains\", this.route)\n      .get();\n    let usercheck = await db\n      .collection(\"projects\")\n      .where(\"name\", \"==\", this.name)\n      .get();\n    this.members = usercheck.docs[0].data().members;\n    let check = this.members.find(item => item == this.user.uname);\n    if (check != undefined) {\n      const ref = db.collection(\"projectchats\");\n      if (findChat.empty) {\n        await ref.add({\n          chats: [],\n          chatBoxID: [this.route]\n        });\n        location.reload();\n      } else {\n        this.chatBoxID = findChat.docs[0].id;\n      }\n      const msgref = db.collection(\"projectchats\").doc(this.chatBoxID);\n      msgref.onSnapshot(docSnapshot => {\n        this.chats = docSnapshot.data().chats;\n      });\n      this.disableSend = true;\n    } else {\n      this.$router.push({\n        name: \"project\",\n        params: {\n          name: this.$route.params.name\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  padding-top: 40px;\n  padding-bottom: 40px;\n}\n\n.material-icons.green {\n  color: green;\n}\n\n.material-icons.red {\n  color: red;\n}\n\n.availability {\n  padding-top: 6px;\n  padding-left: 3px;\n}\n\n.section-head {\n  padding-left: 8px;\n}\n\n.content {\n  padding-left: 12px;\n}\n\n.green {\n  color: green;\n}\n\n.red {\n  color: red;\n}\n\n.scroll {\n  position: relative;\n  z-index: 10;\n  max-height: 400px;\n  overflow-y: scroll;\n}\n\n.add-on .input-group-btn > .btn {\n  border-left-width: 0;\n  left: -2px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n\n.add-on .form-control:focus {\n  box-shadow: none;\n  -webkit-box-shadow: none;\n  border-color: #cccccc;\n}\n\n.text-muted {\n  display: block;\n  font-size: 0.8rem;\n}\n\n.material-icons.md-18 {\n  font-size: 18px;\n}\n\n.material-icons.md-24 {\n  font-size: 24px;\n}\n\n.material-icons.md-36 {\n  font-size: 36px;\n}\n\n.material-icons.md-48 {\n  font-size: 48px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./projectchat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./projectchat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./projectchat.vue?vue&type=template&id=4827d002&scoped=true&\"\nimport script from \"./projectchat.vue?vue&type=script&lang=js&\"\nexport * from \"./projectchat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./projectchat.vue?vue&type=style&index=0&id=4827d002&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4827d002\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}